import{h as L,s as C,j as P,k as q,c as b,a as c,l as E,m as V,w as d,r as D,F as R,u as z,o as m,b as p,t as v,d as r,n as H,e as t,R as I,f as J,g as w,i as k,v as M}from"./index-A7xCt6yc.js";import{u as K,a as O}from"./myGrades-Cdil2DBY.js";const Q={class:"card-header"},W={class:"card-body"},X={class:"card-footer"},Y=["onClick"],Z=["onClick"],ee={class:"card p-3 mx-auto"},te={key:0,class:"mb-3"},ae={class:"collection mb-4"},le={class:"collection mb-4"},se={class:"collection mb-4"},ue={__name:"GradesView",setup(ne){const T=z(),i=L(!1),y=K(),g=O(),{id:G,sub_name:u,pcl_g:l,tcl_g:s}=C(y),{grades:o}=C(g),N=P(()=>o.value.length===0),S=g.deleteGrade,A=y.fillGradeData,_=y.resetGrade,B=g.uploadMyGrades;q(async()=>{await B()});const F=n=>{A(n,o.value[n].sub_name,o.value[n].pcl_g,o.value[n].tcl_g),i.value=!0},x=()=>{if(window.confirm("Are you sure you want to discard changes ?"))_(),i.value=!1;else return},U=()=>{if(u.value.trim()&&l.value!==null&&s.value!==null)if(l.value>=0&&s.value>=0){if(l.value>0&&l.value<=30)s.value<=70&&(window.confirm("Are you sure you want to apply changes ?")?(o.value[G.value]={sub_name:u.value,pcl_g:Math.abs(Math.round(l.value)),tcl_g:Math.abs(Math.round(s.value))},_(),i.value=!1):x());else if(l.value==0)if(s.value<=100)window.confirm("Are you sure you want to apply changes ?")?(o.value[G.value]={sub_name:u.value,pcl_g:Math.abs(Math.round(l.value)),tcl_g:Math.abs(Math.round(s.value))},_(),i.value=!1):x();else return}else return};return(n,e)=>{const $=D("my-header"),f=D("my-container");return m(),b(R,null,[c($,null,{default:d(()=>[p(v(r(T).meta.description),1)]),_:1}),c(f,{class:"container-fluid py-5 my_grades"},{default:d(()=>[(m(!0),b(R,null,H(r(o),(a,h)=>(m(),b("div",{class:"card mx-auto",key:h},[t("div",Q,[t("h2",null,v(a.sub_name),1)]),t("div",W,[t("h4",null,[e[6]||(e[6]=p("Practical grade ")),t("span",null,v(a.pcl_g),1)]),t("h4",null,[e[7]||(e[7]=p("Theoretical grade ")),t("span",null,v(a.tcl_g),1)]),t("h4",null,[e[8]||(e[8]=p("Final grade ")),t("span",null,v(a.pcl_g+a.tcl_g),1)])]),t("div",X,[t("button",{class:"btn btn-danger",onClick:j=>r(S)(h)}," Delete ",8,Y),t("button",{class:"btn btn-success ms-3",onClick:j=>F(h)}," Update ",8,Z)])]))),128))]),_:1}),c(f,{class:"container"},{default:d(()=>[t("div",ee,[N.value?(m(),b("h2",te,"No any grades here yet ...")):V("",!0),c(r(I),{to:{name:"myConfig"},class:"btn btn-dark px-3 py-2"},{default:d(()=>e[9]||(e[9]=[p(" Add new grade ")])),_:1})])]),_:1}),i.value?(m(),E(f,{key:0,class:"container-fluid upToDate"},{default:d(()=>[c(f,{class:"container mx-auto"},{default:d(()=>[t("form",{class:"form rounded shadow p-4 bg-white",method:"get",onSubmit:e[5]||(e[5]=J(()=>{},["prevent"]))},[e[13]||(e[13]=t("h1",{class:"text-center mb-5"},"Grade info",-1)),t("div",ae,[e[10]||(e[10]=t("label",{class:"form-label"},"Subject name",-1)),w(t("input",{class:"form-control",type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>k(u)?u.value=a:null),required:""},null,512),[[M,r(u)]])]),t("div",le,[e[11]||(e[11]=t("label",{class:"form-label"},"Practical grade",-1)),w(t("input",{class:"form-control",type:"number","onUpdate:modelValue":e[1]||(e[1]=a=>k(l)?l.value=a:null),min:"0",max:"30",step:"0.01"},null,512),[[M,r(l),void 0,{number:!0}]])]),t("div",se,[e[12]||(e[12]=t("label",{class:"form-label"},"Theoretical grade",-1)),w(t("input",{class:"form-control",type:"number","onUpdate:modelValue":e[2]||(e[2]=a=>k(s)?s.value=a:null),min:"0",max:"100",step:"0.01"},null,512),[[M,r(s),void 0,{number:!0}]])]),t("button",{class:"btn btn-outline-dark",onClick:e[3]||(e[3]=a=>x())}," discard changes "),t("button",{class:"btn btn-success ms-3",onClick:e[4]||(e[4]=a=>U())}," apply changes ")],32)]),_:1})]),_:1})):V("",!0)],64)}}};export{ue as default};
